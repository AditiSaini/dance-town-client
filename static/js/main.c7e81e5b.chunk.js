(this["webpackJsonpdancetown-client"]=this["webpackJsonpdancetown-client"]||[]).push([[0],{203:function(e,t,a){e.exports=a.p+"static/media/danceman.be335c25.gif"},218:function(e,t,a){e.exports=a(377)},223:function(e,t,a){},230:function(e,t,a){},231:function(e,t,a){},328:function(e,t,a){},331:function(e,t,a){},332:function(e,t,a){},333:function(e,t,a){},360:function(e,t,a){},361:function(e,t,a){},362:function(e,t,a){},363:function(e,t,a){},377:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(50),s=a.n(c),o=a(23),i=(a(223),a(9)),l=a.n(i),u=a(16),m=a(37),d=a(38),p=a(40),h=a(39),f=a(94),g=a(56),b=a(420),v=a(415),E=a(416),k=a(109);a(230);function O(){return r.a.createElement("div",{className:"NotFound"},r.a.createElement("h3",null,"Sorry, page not found!"))}var w=a(417),y=a(407),x=a(422),j=a(405),S=a(406),L=a(378),C=(a(231),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleNoteClick=function(e){e.preventDefault(),n.props.history.push(e.currentTarget.getAttribute("href"))},n.state={isLoading:!0,notes:[]},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.isAuthenticated){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.challenges();case 5:t=e.sent,this.setState({notes:t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0);case 12:this.setState({isLoading:!1});case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"challenges",value:function(){return w.a.get("notes","/challenges")}},{key:"renderNotesList1",value:function(e){var t=this,a="https://dancetown-app-api-dev-attachmentsbucket-ic13uq6xqxwk.s3.amazonaws.com/private";return[{}].concat(e).map((function(e,n){return 0!==n?r.a.createElement(x.a,{className:"card-container",key:e.noteId,href:"/danceup/".concat(e.noteId),onClick:t.handleNoteClick},r.a.createElement(j.a,{className:"card-video",component:"video",image:a+"/"+e.userId+"/"+e.attachment,src:a+"/"+e.userId+"/"+e.attachment,title:"Media"}),r.a.createElement(S.a,null,r.a.createElement(L.a,{gutterBottom:!0,variant:"h4",component:"h2"},e.content.trim().split("\n")[0]),r.a.createElement(L.a,{variant:"body2",color:"textSecondary",component:"p"},"Created: "+new Date(e.createdAt).toLocaleString()))):null}))}},{key:"renderLander",value:function(){return r.a.createElement("div",{className:"lander"},r.a.createElement("h1",null,"Home Town"),r.a.createElement("p",null,"This is the Home page for all your dance need"),r.a.createElement("div",null,r.a.createElement(o.Link,{to:"/login",className:"btn btn-info btn-lg"},"Login"),r.a.createElement(o.Link,{to:"/signup",className:"btn btn-success btn-lg"},"Signup")))}},{key:"renderNotes",value:function(){return r.a.createElement("div",{className:"notes"},r.a.createElement(y.a,null,"Global challenges:"),r.a.createElement("div",{className:"notes-container"},!this.state.isLoading&&this.renderNotesList1(this.state.notes)))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Home"},this.props.isAuthenticated?this.renderNotes():this.renderLander())}}]),a}(n.Component)),N=a(104),I=a(409),A=a(410),P=a(421),D=a(54),F=a(408),T=a(191),R=(a(328),function(e){var t=e.isLoading,a=e.text,n=e.loadingText,c=e.className,s=void 0===c?"":c,o=e.disabled,i=void 0!==o&&o,l=Object(D.a)(e,["isLoading","text","loadingText","className","disabled"]);return r.a.createElement(F.a,Object.assign({className:"LoaderButton ".concat(s),disabled:i||t},l),t&&r.a.createElement(T.a,{glyph:"refresh",className:"spinning"}),t?n:a)});var B=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).statusChangeCallback=function(e){"connected"===e.status?n.handleResponse(e.authResponse):n.handleError(e)},n.checkLoginState=function(){window.FB.getLoginStatus(n.statusChangeCallback)},n.handleClick=function(){window.FB.login(n.checkLoginState,{scope:"public_profile,email"})},n.state={isLoading:!0},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){!function t(){window.FB?e():setTimeout(t,300)}()}));case 2:this.setState({isLoading:!1});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleError",value:function(e){alert(e)}},{key:"handleResponse",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r,c,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.accessToken,r=t.expiresIn,c=1e3*r+(new Date).getTime(),s={email:a},this.setState({isLoading:!0}),e.prev=4,e.next=7,f.a.federatedSignIn("facebook",{token:n,expires_at:c},s);case 7:o=e.sent,this.setState({isLoading:!1}),this.props.onLogin(o),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),this.setState({isLoading:!1}),this.handleError(e.t0);case 16:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(R,{block:!0,bsSize:"large",bsStyle:"primary",className:"FacebookButton",text:"Login with Facebook",onClick:this.handleClick,disabled:this.state.isLoading})}}]),a}(n.Component),U=(a(331),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleFbLogin=function(){n.props.userHasAuthenticated(!0)},n.handleChange=function(e){n.setState(Object(N.a)({},e.target.id,e.target.value))},n.handleSubmit=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n.setState({isLoading:!0}),e.prev=2,e.next=5,f.a.signIn(n.state.email,n.state.password);case 5:n.props.userHasAuthenticated(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),alert(e.t0.message),n.setState({isLoading:!1});case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),n.state={isLoading:!1,email:"",password:""},n}return Object(d.a)(a,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0}},{key:"render",value:function(){return r.a.createElement("div",{className:"Login"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(B,{onLogin:this.handleFbLogin}),r.a.createElement("hr",null),r.a.createElement(I.a,{controlId:"email",bsSize:"large"},r.a.createElement(A.a,null,"Email"),r.a.createElement(P.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(I.a,{controlId:"password",bsSize:"large"},r.a.createElement(A.a,null,"Password"),r.a.createElement(P.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),r.a.createElement(R,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Login",loadingText:"Logging in\u2026"})))}}]),a}(n.Component)),_=a(411),z=(a(332),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleFbLogin=function(){n.props.userHasAuthenticated(!0)},n.handleChange=function(e){n.setState(Object(N.a)({},e.target.id,e.target.value))},n.handleSubmit=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n.setState({isLoading:!0}),e.prev=2,e.next=5,f.a.signUp({username:n.state.email,password:n.state.password});case 5:a=e.sent,n.setState({newUser:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0.message);case 12:n.setState({isLoading:!1});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),n.handleConfirmationSubmit=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n.setState({isLoading:!0}),e.prev=2,e.next=5,f.a.confirmSignUp(n.state.email,n.state.confirmationCode);case 5:return e.next=7,f.a.signIn(n.state.email,n.state.password);case 7:n.props.userHasAuthenticated(!0),n.props.history.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),alert(e.t0.message),n.setState({isLoading:!1});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),n.state={isLoading:!1,email:"",password:"",confirmPassword:"",confirmationCode:"",newUser:null},n}return Object(d.a)(a,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0&&this.state.password===this.state.confirmPassword}},{key:"validateConfirmationForm",value:function(){return this.state.confirmationCode.length>0}},{key:"renderConfirmationForm",value:function(){return r.a.createElement("form",{onSubmit:this.handleConfirmationSubmit},r.a.createElement(I.a,{controlId:"confirmationCode",bsSize:"large"},r.a.createElement(A.a,null,"Confirmation Code"),r.a.createElement(P.a,{autoFocus:!0,type:"tel",value:this.state.confirmationCode,onChange:this.handleChange}),r.a.createElement(_.a,null,"Please check your email for the code.")),r.a.createElement(R,{block:!0,bsSize:"large",disabled:!this.validateConfirmationForm(),type:"submit",isLoading:this.state.isLoading,text:"Verify",loadingText:"Verifying\u2026"}))}},{key:"renderForm",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(B,{onLogin:this.handleFbLogin}),r.a.createElement("hr",null),r.a.createElement(I.a,{controlId:"email",bsSize:"large"},r.a.createElement(A.a,null,"Email"),r.a.createElement(P.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(I.a,{controlId:"password",bsSize:"large"},r.a.createElement(A.a,null,"Password"),r.a.createElement(P.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),r.a.createElement(I.a,{controlId:"confirmPassword",bsSize:"large"},r.a.createElement(A.a,null,"Confirm Password"),r.a.createElement(P.a,{value:this.state.confirmPassword,onChange:this.handleChange,type:"password"})),r.a.createElement(R,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Signup",loadingText:"Signing up\u2026"}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Signup"},null===this.state.newUser?this.renderForm():this.renderConfirmationForm())}}]),a}(n.Component)),H=a(123),M=a(412),G=(a(333),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleNoteClick=function(e){e.preventDefault(),n.props.history.push(e.currentTarget.getAttribute("href"))},n.state={isLoading:!0,notes:[]},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.notes();case 3:t=e.sent,this.setState({notes:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:this.setState({isLoading:!1});case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"notes",value:function(){return w.a.get("notes","/notes")}},{key:"renderNotesList",value:function(e){var t=this;return[{}].concat(e).map((function(e,a){return 0!==a?r.a.createElement(H.a,{key:e.noteId,href:"/challenges/".concat(e.noteId),onClick:t.handleNoteClick,header:e.content.trim().split("\n")[0]},"Created: "+new Date(e.createdAt).toLocaleString()):r.a.createElement(H.a,{key:"new",href:"/challenges/new",onClick:t.handleNoteClick},r.a.createElement("h4",null,r.a.createElement("b",null,"\uff0b")," Create a new challenge"))}))}},{key:"renderLander",value:function(){return r.a.createElement("div",{className:"lander"},r.a.createElement("h1",null,"Home Town"),r.a.createElement("p",null,"This is the Home page for all your dance need"),r.a.createElement("div",null,r.a.createElement(o.Link,{to:"/login",className:"btn btn-info btn-lg"},"Login"),r.a.createElement(o.Link,{to:"/signup",className:"btn btn-success btn-lg"},"Signup")))}},{key:"renderNotes",value:function(){return r.a.createElement("div",{className:"notes"},r.a.createElement(y.a,null,"Your Challenges"),r.a.createElement(M.a,null,!this.state.isLoading&&this.renderNotesList(this.state.notes)))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Profile"},this.renderNotes())}}]),a}(n.Component)),q=a(30),Y=a(418);function K(e){return W.apply(this,arguments)}function W(){return(W=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(Date.now(),"-").concat(t.name),e.next=3,Y.a.vault.put(a,t,{contentType:t.type});case 3:return n=e.sent,e.abrupt("return",n.key);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){var t=e.toString();e instanceof Error||!e.message||(t=e.message),alert(t)}var J=5e7,V={REGION:"us-east-1",BUCKET:"dancetown-app-api-dev-attachmentsbucket-ic13uq6xqxwk"},Q={REGION:"us-east-1",URL:"https://a8ri42gnh0.execute-api.us-east-1.amazonaws.com/dev"},X={REGION:"us-east-1",USER_POOL_ID:"us-east-1_Y4Pi1n6F0",APP_CLIENT_ID:"1oft85bvo8q9ltflrrkl7cblt0",IDENTITY_POOL_ID:"us-east-1:d9bc91be-17e4-413d-87f5-b89859a5dac9"},Z={FB:"192446828747386"};a(360);function ee(){var e=Object(n.useRef)(null),t=Object(g.k)(),a=Object(n.useState)(""),c=Object(q.a)(a,2),s=c[0],o=c[1],i=Object(n.useState)(!1),m=Object(q.a)(i,2),d=m[0],p=m[1];function h(){return(h=Object(u.a)(l.a.mark((function a(n){var r;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),!(e.current&&e.current.size>J)){a.next=4;break}return alert("Please pick a file smaller than ".concat(J/1e6," MB.")),a.abrupt("return");case 4:if(p(!0),a.prev=5,!e.current){a.next=12;break}return a.next=9,K(e.current);case 9:a.t0=a.sent,a.next=13;break;case 12:a.t0=null;case 13:return r=a.t0,a.next=16,f({content:s,attachment:r});case 16:t.push("/"),a.next=23;break;case 19:a.prev=19,a.t1=a.catch(5),$(a.t1),p(!1);case 23:case"end":return a.stop()}}),a,null,[[5,19]])})))).apply(this,arguments)}function f(e){return w.a.post("notes","/notes",{body:e})}return r.a.createElement("div",{className:"NewNote"},r.a.createElement("form",{onSubmit:function(e){return h.apply(this,arguments)}},r.a.createElement(I.a,{controlId:"content"},r.a.createElement(P.a,{value:s,componentClass:"textarea",onChange:function(e){return o(e.target.value)}})),r.a.createElement(I.a,{controlId:"file"},r.a.createElement(A.a,null,"Attachment"),r.a.createElement(P.a,{onChange:function(t){e.current=t.target.files[0]},type:"file"})),r.a.createElement(R,{block:!0,bsStyle:"primary",bsSize:"large",disabled:!(s.length>0),type:"submit",isLoading:d,text:"Create",loadingText:"Creating\u2026"})))}var te=a(413),ae=a(419);a(361);function ne(){var e=Object(n.useRef)(null),t=Object(g.m)().id,a=Object(g.k)(),c=Object(n.useState)(null),s=Object(q.a)(c,2),o=s[0],i=s[1],m=Object(n.useState)(""),d=Object(q.a)(m,2),p=d[0],h=d[1],f=Object(n.useState)(!1),b=Object(q.a)(f,2),v=b[0],E=b[1],k=Object(n.useState)(!1),O=Object(q.a)(k,2),y=O[0],x=O[1],j=Object(n.useState)(!1),S=Object(q.a)(j,2),L=S[0],C=S[1];function N(e){return w.a.put("notes","/notes/".concat(t),{body:e})}function D(){return(D=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!(e.current&&e.current.size>J)){t.next=4;break}return alert("Please pick a file smaller than ".concat(J/1e6," MB.")),t.abrupt("return");case 4:if(x(!0),t.prev=5,!e.current){t.next=10;break}return t.next=9,K(e.current);case 9:r=t.sent;case 10:return t.next=12,N({content:p,attachment:r||o.attachment,isPublic:v});case 12:a.push("/"),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(5),$(t.t0),x(!1);case 19:case"end":return t.stop()}}),t,null,[[5,15]])})))).apply(this,arguments)}function F(){return w.a.del("notes","/notes/".concat(t))}function T(){return(T=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),window.confirm("Are you sure you want to delete this challenge?")){e.next=4;break}return e.abrupt("return");case 4:return C(!0),e.prev=5,e.next=8,F();case 8:a.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),$(e.t0),C(!1);case 15:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){function e(){return w.a.get("notes","/notes/".concat(t))}function a(){return(a=Object(u.a)(l.a.mark((function t(){var a,n,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:if(a=t.sent,n=a.content,r=a.attachment,c=a.isPublic,!r){t.next=9;break}return t.next=8,Y.a.vault.get(r);case 8:a.attachmentURL=t.sent;case 9:h(n),i(a),E(c),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),$(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[t]),r.a.createElement("div",{className:"Challenges"},o&&r.a.createElement("form",{onSubmit:function(e){return D.apply(this,arguments)}},r.a.createElement(I.a,{controlId:"content"},r.a.createElement(P.a,{value:p,componentClass:"textarea",onChange:function(e){return h(e.target.value)}})),o.attachment&&r.a.createElement("video",{width:"320",height:"240",controls:!0},r.a.createElement("source",{src:o.attachmentURL,type:"video/mp4"})),r.a.createElement(I.a,{controlId:"file"},!o.attachment&&r.a.createElement(A.a,null,"Attachment"),r.a.createElement(P.a,{onChange:function(t){e.current=t.target.files[0]},type:"file"})),r.a.createElement(I.a,null,r.a.createElement(te.a,{control:r.a.createElement(ae.a,{checked:v,onChange:function(e){return E(!v)},name:"isPublic"}),label:"Make item public"})),r.a.createElement(R,{block:!0,type:"submit",bsSize:"large",bsStyle:"primary",text:"save",isLoading:y,disabled:!(p.length>0)}),r.a.createElement(R,{block:!0,bsSize:"large",bsStyle:"danger",text:"delete",onClick:function(e){return T.apply(this,arguments)},isLoading:L})))}var re=a(203),ce=a.n(re),se=a(414);a(362);function oe(){Object(n.useRef)(null);var e=Object(g.m)().id,t=(Object(g.k)(),Object(n.useState)(null)),a=Object(q.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(""),i=Object(q.a)(o,2),m=(i[0],i[1]),d=Object(n.useState)(!1),p=Object(q.a)(d,2),h=(p[0],p[1]),f=Object(n.useState)(!1),b=Object(q.a)(f,2),v=(b[0],b[1],Object(n.useState)(!1)),E=Object(q.a)(v,2);E[0],E[1];return Object(n.useEffect)((function(){function t(){return w.a.get("notes","/notes/".concat(e))}function a(){return(a=Object(u.a)(l.a.mark((function e(){var a,n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:if(a=e.sent,n=a.content,r=a.attachment,c=a.isPublic,!r){e.next=9;break}return e.next=8,Y.a.vault.get(r);case 8:a.attachmentURL=e.sent;case 9:m(n),s(a),h(c),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),$(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[e]),r.a.createElement("div",{className:"Challenges"},c&&r.a.createElement("div",{className:"DanceUp"},r.a.createElement(x.a,{className:"card-container",href:"/challenges/".concat(c.noteId)},r.a.createElement(j.a,{className:"card-video",component:"video",image:c.attachmentURL,title:"Media"}),r.a.createElement(S.a,null,r.a.createElement(L.a,{gutterBottom:!0,variant:"h4",component:"h2"},c.content.trim().split("\n")[0]),r.a.createElement(L.a,{variant:"body2",color:"textSecondary",component:"p"},"Created: "+new Date(c.createdAt).toLocaleString()))),r.a.createElement(x.a,{className:"card-container"},r.a.createElement(se.a,null,r.a.createElement("img",{className:"add-challenge",src:ce.a}),r.a.createElement(L.a,{className:"add-challenge-text",gutterBottom:!0,variant:"h4",component:"h2"},"Add your Dance")))))}var ie=function(e){var t=e.component,a=e.props,n=Object(D.a)(e,["component","props"]);return r.a.createElement(g.d,Object.assign({},n,{render:function(e){return r.a.createElement(t,Object.assign({},e,a))}}))},le=function(e){var t=e.component,a=e.props,n=Object(D.a)(e,["component","props"]);return r.a.createElement(g.d,Object.assign({},n,{render:function(e){return a.isAuthenticated?r.a.createElement(t,Object.assign({},e,a)):r.a.createElement(g.c,{to:"/login?redirect=".concat(e.location.pathname).concat(e.location.search)})}}))};var ue=function(e){var t=e.component,a=e.props,n=Object(D.a)(e,["component","props"]),c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[[]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i"),n=a.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}("redirect");return r.a.createElement(g.d,Object.assign({},n,{render:function(e){return a.isAuthenticated?r.a.createElement(g.c,{to:""===c||null===c?"/":c}):r.a.createElement(t,Object.assign({},e,a))}}))},me=function(e){var t=e.childProps;return r.a.createElement(g.g,null,r.a.createElement(ie,{path:"/",exact:!0,component:C,props:t}),r.a.createElement(ue,{path:"/login",exact:!0,component:U,props:t}),r.a.createElement(ue,{path:"/signup",exact:!0,component:z,props:t}),r.a.createElement(le,{exact:!0,component:G,props:t,path:"/profile"}),r.a.createElement(le,{exact:!0,path:"/challenges/new"},r.a.createElement(ee,null)),r.a.createElement(le,{exact:!0,path:"/challenges/:id"},r.a.createElement(ne,null)),r.a.createElement(le,{exact:!0,path:"/danceup/:id"},r.a.createElement(oe,null)),r.a.createElement(g.d,{component:O}))},de=(a(363),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).userHasAuthenticated=function(e){n.setState({isAuthenticated:e})},n.handleLogout=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.signOut();case 2:n.userHasAuthenticated(!1),n.props.history.push("/login");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={isAuthenticated:!1,isAuthenticating:!0},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadFacebookSDK(),e.prev=1,e.next=4,f.a.currentAuthenticatedUser();case 4:this.userHasAuthenticated(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),"not authenticated"!==e.t0&&alert(e.t0);case 10:this.setState({isAuthenticating:!1});case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadFacebookSDK",value:function(){window.fbAsyncInit=function(){window.FB.init({appId:Z.FB,autoLogAppEvents:!0,xfbml:!0,version:"v3.1"})},function(e,t,a){var n,r=e.getElementsByTagName(t)[0];e.getElementById(a)||((n=e.createElement(t)).id=a,n.src="https://connect.facebook.net/en_US/sdk.js",r.parentNode.insertBefore(n,r))}(document,"script","facebook-jssdk")}},{key:"render",value:function(){var e={isAuthenticated:this.state.isAuthenticated,userHasAuthenticated:this.userHasAuthenticated};return!this.state.isAuthenticating&&r.a.createElement("div",{className:"App container"},r.a.createElement(b.a,{fluid:!0,collapseOnSelect:!0},r.a.createElement(b.a.Header,null,r.a.createElement(b.a.Brand,null,r.a.createElement(o.Link,{to:"/"},"DanceTown")),r.a.createElement(b.a.Toggle,null)),r.a.createElement(b.a.Collapse,null,r.a.createElement(v.a,{pullRight:!0},this.state.isAuthenticated?r.a.createElement(n.Fragment,null,r.a.createElement(k.LinkContainer,{to:"/profile"},r.a.createElement(E.a,null,"Profile")),r.a.createElement(E.a,{onClick:this.handleLogout},"Logout")):r.a.createElement(n.Fragment,null,r.a.createElement(k.LinkContainer,{to:"/signup"},r.a.createElement(E.a,null,"Signup")),r.a.createElement(k.LinkContainer,{to:"/login"},r.a.createElement(E.a,null,"Login")))))),r.a.createElement(me,{childProps:e}))}}]),a}(n.Component)),pe=Object(g.o)(de);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(60).a.configure({Auth:{mandatorySignIn:!0,region:X.REGION,userPoolId:X.USER_POOL_ID,identityPoolId:X.IDENTITY_POOL_ID,userPoolWebClientId:X.APP_CLIENT_ID},Storage:{region:V.REGION,bucket:V.BUCKET,identityPoolId:X.IDENTITY_POOL_ID},API:{endpoints:[{name:"notes",endpoint:Q.URL,region:Q.REGION}]}}),s.a.render(r.a.createElement(o.HashRouter,{basename:"/"},r.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[218,1,2]]]);
//# sourceMappingURL=main.c7e81e5b.chunk.js.map