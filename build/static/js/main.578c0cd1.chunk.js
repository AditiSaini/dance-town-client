(this["webpackJsonpdancetown-client"]=this["webpackJsonpdancetown-client"]||[]).push([[0],{195:function(e,t,a){e.exports=a(352)},200:function(e,t,a){},202:function(e,t,a){},208:function(e,t,a){},307:function(e,t,a){},308:function(e,t,a){},309:function(e,t,a){},336:function(e,t,a){},337:function(e,t,a){},338:function(e,t,a){},352:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(68),l=a.n(c),o=a(28),s=(a(200),a(12)),u=a.n(s),i=a(20),m=a(16),p=a(42);a(202);function f(){return r.a.createElement("div",{className:"NotFound"},r.a.createElement("h3",null,"Sorry, page not found!"))}var d=a(368),b=a(105),h=a(360),E=a(361),g=a(54),v=Object(n.createContext)(null);function O(){return Object(n.useContext)(v)}function w(e){var t=e.toString();e instanceof Error||!e.message||(t=e.message),alert(t)}a(208);function j(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],l=O().isAuthenticated,o=Object(n.useState)(!0),s=Object(m.a)(o,2),p=s[0],f=s[1];function v(){return d.a.get("notes","/notes")}return Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,v();case 5:t=e.sent,c(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),w(e.t0);case 12:f(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[l]),r.a.createElement("div",{className:"Home"},l?r.a.createElement("div",{className:"notes"},r.a.createElement(h.a,null,"Your Notes"),r.a.createElement(E.a,null,!p&&function(e){return[{}].concat(e).map((function(e,t){return 0!==t?r.a.createElement(g.LinkContainer,{key:e.noteId,to:"/challenges/".concat(e.noteId)},r.a.createElement(b.a,{header:e.content.trim().split("\n")[0]},"Created: "+new Date(e.createdAt).toLocaleString())):r.a.createElement(g.LinkContainer,{key:"new",to:"/challenges/new"},r.a.createElement(b.a,null,r.a.createElement("h4",null,r.a.createElement("b",null,"\uff0b")," Create a new challenge")))}))}(a))):r.a.createElement("div",{className:"Home"},r.a.createElement("div",{className:"lander"},r.a.createElement("h1",null,"Home Town"),r.a.createElement("p",null,"This is the Home page for all your dance need"))))}var y=a(80),k=a(363),x=a(364),S=a(371),I=a(53),C=a(362),L=a(172);a(307);function N(e){var t=e.isLoading,a=e.className,n=void 0===a?"":a,c=e.disabled,l=void 0!==c&&c,o=Object(I.a)(e,["isLoading","className","disabled"]);return r.a.createElement(C.a,Object.assign({className:"LoaderButton ".concat(n),disabled:l||t},o),t&&r.a.createElement(L.a,{glyph:"refresh",className:"spinning"}),o.children)}var P=a(90),D=a(107);function R(e){var t=Object(n.useState)(e),a=Object(m.a)(t,2),r=a[0],c=a[1];return[r,function(e){c(Object(D.a)(Object(D.a)({},r),{},Object(P.a)({},e.target.id,e.target.value)))}]}a(308);function z(){var e=O().userHasAuthenticated,t=Object(n.useState)(!1),a=Object(m.a)(t,2),c=a[0],l=a[1],o=R({email:"",password:""}),s=Object(m.a)(o,2),p=s[0],f=s[1];function d(){return(d=Object(i.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),l(!0),t.prev=2,t.next=5,y.a.signIn(p.email,p.password);case 5:e(!0),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),w(t.t0),l(!1);case 12:case"end":return t.stop()}}),t,null,[[2,8]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"Login"},r.a.createElement("form",{onSubmit:function(e){return d.apply(this,arguments)}},r.a.createElement(k.a,{controlId:"email",bsSize:"large"},r.a.createElement(x.a,null,"Email"),r.a.createElement(S.a,{autoFocus:!0,type:"email",value:p.email,onChange:f})),r.a.createElement(k.a,{controlId:"password",bsSize:"large"},r.a.createElement(x.a,null,"Password"),r.a.createElement(S.a,{type:"password",value:p.password,onChange:f})),r.a.createElement(N,{block:!0,type:"submit",bsSize:"large",isLoading:c,disabled:!(p.email.length>0&&p.password.length>0)},"Login")))}var A=a(365);a(309);function _(){var e=R({email:"",password:"",confirmPassword:"",confirmationCode:""}),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(p.k)(),o=Object(n.useState)(null),s=Object(m.a)(o,2),f=s[0],d=s[1],b=O().userHasAuthenticated,h=Object(n.useState)(!1),E=Object(m.a)(h,2),g=E[0],v=E[1];function j(e){return I.apply(this,arguments)}function I(){return(I=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),v(!0),e.prev=2,e.next=5,y.a.signUp({username:a.email,password:a.password});case 5:n=e.sent,v(!1),d(n),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),w(e.t0),v(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function C(e){return L.apply(this,arguments)}function L(){return(L=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),v(!0),e.prev=2,e.next=5,y.a.confirmSignUp(a.email,a.confirmationCode);case 5:return e.next=7,y.a.signIn(a.email,a.password);case 7:b(!0),l.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),w(e.t0),v(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"Signup"},null===f?r.a.createElement("form",{onSubmit:j},r.a.createElement(k.a,{controlId:"email",bsSize:"large"},r.a.createElement(x.a,null,"Email"),r.a.createElement(S.a,{autoFocus:!0,type:"email",value:a.email,onChange:c})),r.a.createElement(k.a,{controlId:"password",bsSize:"large"},r.a.createElement(x.a,null,"Password"),r.a.createElement(S.a,{type:"password",value:a.password,onChange:c})),r.a.createElement(k.a,{controlId:"confirmPassword",bsSize:"large"},r.a.createElement(x.a,null,"Confirm Password"),r.a.createElement(S.a,{type:"password",onChange:c,value:a.confirmPassword})),r.a.createElement(N,{block:!0,type:"submit",bsSize:"large",isLoading:g,disabled:!(a.email.length>0&&a.password.length>0&&a.password===a.confirmPassword)},"Signup")):r.a.createElement("form",{onSubmit:C},r.a.createElement(k.a,{controlId:"confirmationCode",bsSize:"large"},r.a.createElement(x.a,null,"Confirmation Code"),r.a.createElement(S.a,{autoFocus:!0,type:"tel",onChange:c,value:a.confirmationCode}),r.a.createElement(A.a,null,"Please check your email for the code.")),r.a.createElement(N,{block:!0,type:"submit",bsSize:"large",isLoading:g,disabled:!(a.confirmationCode.length>0)},"Verify")))}var T=a(369);function U(e){return B.apply(this,arguments)}function B(){return(B=Object(i.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(Date.now(),"-").concat(t.name),e.next=3,T.a.vault.put(a,t,{contentType:t.type});case 3:return n=e.sent,e.abrupt("return",n.key);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H=5e7,F={REGION:"us-east-1",BUCKET:"dance-town-app-api-dev-0-attachmentsbucket-1m6dsoqfa81qq"},G={REGION:"us-east-1",URL:"https://1z9h7oowzl.execute-api.us-east-1.amazonaws.com/dev-0"},Y={REGION:"us-east-1",USER_POOL_ID:"us-east-1_FmaY7lyDe",APP_CLIENT_ID:"l21rmjvnvl6ov8l9b23f7q7if",IDENTITY_POOL_ID:"us-east-1:23fdb785-602c-4591-97b6-f687b3be51fe"};a(336);function q(){var e=Object(n.useRef)(null),t=Object(p.k)(),a=Object(n.useState)(""),c=Object(m.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)(!1),f=Object(m.a)(s,2),b=f[0],h=f[1];function E(){return(E=Object(i.a)(u.a.mark((function a(n){var r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),!(e.current&&e.current.size>H)){a.next=4;break}return alert("Please pick a file smaller than ".concat(H/1e6," MB.")),a.abrupt("return");case 4:if(h(!0),a.prev=5,!e.current){a.next=12;break}return a.next=9,U(e.current);case 9:a.t0=a.sent,a.next=13;break;case 12:a.t0=null;case 13:return r=a.t0,a.next=16,g({content:l,attachment:r});case 16:t.push("/"),a.next=23;break;case 19:a.prev=19,a.t1=a.catch(5),w(a.t1),h(!1);case 23:case"end":return a.stop()}}),a,null,[[5,19]])})))).apply(this,arguments)}function g(e){return d.a.post("notes","/notes",{body:e})}return r.a.createElement("div",{className:"NewNote"},r.a.createElement("form",{onSubmit:function(e){return E.apply(this,arguments)}},r.a.createElement(k.a,{controlId:"content"},r.a.createElement(S.a,{value:l,componentClass:"textarea",onChange:function(e){return o(e.target.value)}})),r.a.createElement(k.a,{controlId:"file"},r.a.createElement(x.a,null,"Attachment"),r.a.createElement(S.a,{onChange:function(t){e.current=t.target.files[0]},type:"file"})),r.a.createElement(N,{block:!0,type:"submit",bsSize:"large",bsStyle:"primary",isLoading:b,disabled:!(l.length>0)},"Create")))}a(337);function W(){var e=Object(n.useRef)(null),t=Object(p.m)().id,a=Object(p.k)(),c=Object(n.useState)(null),l=Object(m.a)(c,2),o=l[0],s=l[1],f=Object(n.useState)(""),b=Object(m.a)(f,2),h=b[0],E=b[1],g=Object(n.useState)(!1),v=Object(m.a)(g,2),O=v[0],j=v[1],y=Object(n.useState)(!1),I=Object(m.a)(y,2),C=I[0],L=I[1];function P(){return(P=Object(i.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!(e.current&&e.current.size>H)){t.next=4;break}return alert("Please pick a file smaller than ".concat(H/1e6," MB.")),t.abrupt("return");case 4:j(!0);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function D(){return d.a.del("notes","/challenges/".concat(t))}function R(){return(R=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),window.confirm("Are you sure you want to delete this item?")){e.next=4;break}return e.abrupt("return");case 4:return L(!0),e.prev=5,e.next=8,D();case 8:a.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),w(e.t0),L(!1);case 15:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){function e(){return d.a.get("notes","/challenges/".concat(t))}function a(){return(a=Object(i.a)(u.a.mark((function t(){var a,n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:if(a=t.sent,n=a.content,!(r=a.attachment)){t.next=9;break}return t.next=8,T.a.vault.get(r);case 8:a.attachmentURL=t.sent;case 9:E(n),s(a),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),w(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[t]),r.a.createElement("div",{className:"Challenges"},o&&r.a.createElement("form",{onSubmit:function(e){return P.apply(this,arguments)}},r.a.createElement(k.a,{controlId:"content"},r.a.createElement(S.a,{value:h,componentClass:"textarea",onChange:function(e){return E(e.target.value)}})),o.attachment&&r.a.createElement(k.a,null,r.a.createElement(x.a,null,"Attachment"),r.a.createElement(S.a.Static,null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:o.attachmentURL},o.attachment.replace(/^\w+-/,"")))),r.a.createElement(k.a,{controlId:"file"},!o.attachment&&r.a.createElement(x.a,null,"Attachment"),r.a.createElement(S.a,{onChange:function(t){e.current=t.target.files[0]},type:"file"})),r.a.createElement(N,{block:!0,type:"submit",bsSize:"large",bsStyle:"primary",isLoading:O,disabled:!(h.length>0)},"Save"),r.a.createElement(N,{block:!0,bsSize:"large",bsStyle:"danger",onClick:function(e){return R.apply(this,arguments)},isLoading:C},"Delete")))}function $(e){var t=e.children,a=Object(I.a)(e,["children"]),n=Object(p.l)(),c=n.pathname,l=n.search,o=O().isAuthenticated;return r.a.createElement(p.d,a,o?t:r.a.createElement(p.c,{to:"/login?redirect=".concat(c).concat(l)}))}function J(e){var t=e.children,a=Object(I.a)(e,["children"]),n=O().isAuthenticated,c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[[]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i"),n=a.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}("redirect");return r.a.createElement(p.d,a,n?r.a.createElement(p.c,{to:""===c||null===c?"/":c}):t)}function K(){return r.a.createElement(p.g,null,r.a.createElement(p.d,{exact:!0,path:"/"},r.a.createElement(j,null)),r.a.createElement(J,{exact:!0,path:"/login"},r.a.createElement(z,null)),r.a.createElement(J,{exact:!0,path:"/signup"},r.a.createElement(_,null)),r.a.createElement($,{exact:!0,path:"/challenges/new"},r.a.createElement(q,null)),r.a.createElement($,{exact:!0,path:"/challenges/:id"},r.a.createElement(W,null)),r.a.createElement(p.d,null,r.a.createElement(f,null)))}var M=a(370),V=a(366),Q=a(367);a(338);var X=function(){var e=Object(p.k)(),t=Object(n.useState)(!0),a=Object(m.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(!1),f=Object(m.a)(s,2),d=f[0],b=f[1];function h(){return(h=Object(i.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.signOut();case 2:b(!1),e.push("/login");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(){return(E=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.currentSession();case 3:b(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),"No current user"!==e.t0&&alert(e.t0);case 9:l(!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){E.apply(this,arguments)}()}),[]),!c&&r.a.createElement("div",{className:"App container"},r.a.createElement(M.a,{fluid:!0,collapseOnSelect:!0},r.a.createElement(M.a.Header,null,r.a.createElement(M.a.Brand,null,r.a.createElement(o.Link,{to:"/"},"DanceTown")),r.a.createElement(M.a.Toggle,null)),r.a.createElement(M.a.Collapse,null,r.a.createElement(V.a,{pullRight:!0},d?r.a.createElement(Q.a,{onClick:function(){return h.apply(this,arguments)}},"Logout"):r.a.createElement(r.a.Fragment,null,r.a.createElement(g.LinkContainer,{to:"/signup"},r.a.createElement(Q.a,null,"Signup")),r.a.createElement(g.LinkContainer,{to:"/login"},r.a.createElement(Q.a,null,"Login")))))),r.a.createElement(v.Provider,{value:{isAuthenticated:d,userHasAuthenticated:b}},r.a.createElement(K,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(46).a.configure({Auth:{mandatorySignIn:!0,region:Y.REGION,userPoolId:Y.USER_POOL_ID,identityPoolId:Y.IDENTITY_POOL_ID,userPoolWebClientId:Y.APP_CLIENT_ID},Storage:{region:F.REGION,bucket:F.BUCKET,identityPoolId:Y.IDENTITY_POOL_ID},API:{endpoints:[{name:"notes",endpoint:G.URL,region:G.REGION}]}}),l.a.render(r.a.createElement(o.BrowserRouter,null,r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[195,1,2]]]);
//# sourceMappingURL=main.578c0cd1.chunk.js.map